[language-server.pyright]
command = "pyright-langserver"
args = ["--stdio"]
config = {}

[language-server.tinymist]
command = "tinymist"

[language-server.ty-server]
command = "ty"
args = ["server"]
config = { experimental = {completions = {enable = true }}}

[language-server.ruff-server]
command = "ruff"
args = ["server"]
config = {}

[language-server.pylsp.config.pylsp.plugins]
rope.enabled = true
ruff.enabled = true
pyls_mypy.enabled = true
pyls_mypy.live_mode = true
jedi_completion.eager = true
jedi_completion.cache_for = ["django"]
rope_autoimport.enabled = true
rope_completion.enabled = true

[language-server.steel-lsp]
command="steel-language-server"
args=[]
config={}

[[language]]
name = "json"
formatter = {command = "jq", args=["."]}

[[language]]
name = "scheme"
language-servers=["steel-lsp"]

[[language]]
name = "python"
language-servers = ["pyright", "ruff-server"]
formatter = {command = "ruff", args = ["format", "-"]}
auto-format = true

[[language]]
name = "cpp"
formatter =  { command = 'clang-format', args = ['--style=file'] }
auto-format = false

[[language]]
name = "markdown"
soft-wrap.enable = true

[[language]]
name = "html"
scope = "text.html"
file-types = ["html", {glob = "*.html.j2"}]
auto-format = true
soft-wrap = {enable = true}
formatter = {command = "djlint", args = ["-", "--reformat"]}

[[language]]
name = "typst"
language-servers = ["tinymist"]


# WEBSHIT
[language-server]
biome = { command = "biome", args = ["lsp-proxy"] }

[[language]]
name = "javascript"
language-servers = [ { name = "typescript-language-server", except-features = [ "format" ] }, "biome" ]
auto-format = true

[[language]]
name = "typescript"
language-servers = [ { name = "typescript-language-server", except-features = [ "format" ] }, "biome" ]
auto-format = true

[[language]]
name = "tsx"
auto-format = true
language-servers = [ { name = "typescript-language-server", except-features = [ "format" ] }, "biome" ]

[[language]]
name = "jsx"
auto-format = true
language-servers = [ { name = "typescript-language-server", except-features = [ "format" ] }, "biome" ]

[[language]]
name = "json"
language-servers = [ { name = "vscode-json-language-server", except-features = [ "format" ] }, "biome" ]

[language-server.jdtls]
command = "jdtls"

[[language]]
name = "java"
scope = "source.java"
file-types = ["java"]
roots = ["pom.xml", "build.gradle", "app/build.gradle.kts", ".git"]
language-servers = ["jdtls"]  

[language-server.metals]
command = "metals"
args = []

[[language]]
name = "scala"
scope = "source.scala"
file-types = ["scala", "sbt", "sc"]
roots = ["build.sbt", "build.sc"]
language-servers = ["metals"]
indent = { tab-width = 2, unit = "  " }  


